<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" data-fjs-lang="en-us" data-fjs-fb-appid="266369793411335" data-fjs-fb-xd="xd_receiver.html">
    <head>
        <title>FairyJS Demo Page</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
        <style type="text/css">
            body {
                font-size: 14px;
            }
            .error {
                color:red;
                font-size: 12px;
            }
            .ui-container {
                width: 100%;
                height: 200px;
            }
            .ui-element {
                width: 50px;
                height: 50px;
                background-color: #EEEEEE;
                border: 1px solid black;
            }
            .ui-state-highlight {
                background-color: yellow;
            }
            .ui-dropped {
                float:left;
            }
        </style>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js"></script>
        <!-- Core -->
        
        <script type="text/javascript" src="../min/fjs-min.js"></script>
        
        <script type="text/javascript">
            //Configuring FairyJS according to our needs
            $$.fjs.configure({
               debugMode: true,
//             verboseMode: true,
                langPath: '../src/lang/'
            });
        </script>
        <!-- Plugins -->
        <script type="text/javascript">
            //Adding custom validator
            $$.fjs.validate.add('foo', function(value, params) {
                return value == params.param;
            },
            {
                param: '1'
            });
            //Adding localization data for validator
            $$.fjs.lang
                .addEntity('en-us', 'Please enter digit \'2\'','Please enter digit \'2\'')
                .addEntity('ru-ru', 'Please enter digit \'2\'','Введите цифру \'2\'');
            
            //Subscribing for drop event
            $$.fjs.subscribe('org.fjs.dragndrop.drop', function($ev, $what, $where) {
                $what.attr('style','').clone().prependTo($where.parent()).makeDraggable();
                $what.addClass('ui-dropped').appendTo($where);
                $$.fjs.dragndrop.disableDragFor($what);
            });
        
            //Subscibing to Facebook events
            $$.fjs.subscribe('org.fjs.facebook.login_status.change', function($ev, isLoggedIn) {
                if (isLoggedIn) {
                    $('#login_status').html('Getting profile for user '+$$.fjs.facebook.getUserId());
                    $$.fjs.facebook.requestProfile();
                } else {
                    $('#login_status').html('Not logged in');
                }
            });
            
            $$.fjs.subscribe('org.fjs.facebook.profile_request.complete', function($ev, response) {
                $('#login_status').html('Welcome, '+response.name+'!');
            });
        
        </script>
    </head>
    <body>
        <div>
            <h1 data-fjs-localizable="Test form">Test form</h1>
            <form action="index.html" method="post">
                <div>
                    <label for="test1" data-fjs-localizable="Required, Integer">Required, Integer</label>
                    <input type="text" id="test1" name="test1" value="" data-fjs-validate="blur" data-fjs-required="true" data-fjs-validator="int" data-fjs-int_error_message="Value must be integer" />
                    <div class="error" data-fjs-error_for="test1"></div>
                </div>
                <div>
                    <label for="test2" data-fjs-localizable="Not required, regexp /^.{4}$/, integer">Not required, regexp /^.{4}$/, integer</label>
                    <input type="text" id="test2" name="test2" value="" data-fjs-validate="keypress" data-fjs-validator="regexp,int" data-fjs-regexp_regex="^.{4}$" data-fjs-regexp_error_message="Value should be 4 characters" data-fjs-int_error_message="Value must be integer"/>
                    <div class="error" data-fjs-error_for="test2"></div>
                </div>
                <div>
                    <label for="test3" data-fjs-localizable="Custom validator 'foo'">Custom validator 'foo'</label>
                    <input type="text" id="test3" name="test3" value="" data-fjs-validate="blur" data-fjs-validator="foo" data-fjs-foo_param="2" data-fjs-foo_error_message="Please enter digit '2'"/>
                    <div class="error" data-fjs-error_for="test3"></div>
                </div>
                <div>
                    <label for="test4" data-fjs-localizable="Required, Email">Required, Email</label>
                    <input type="text" id="test4" name="test4" value="" data-fjs-validate="blur" data-fjs-required="true" data-fjs-validator="email" data-fjs-email_error_message="Please enter valid email"/>
                    <div class="error" data-fjs-error_for="test4"></div>
                </div>
                <div>
                    <label for="test5" data-fjs-localizable="Required">Required</label>
                    <input type="checkbox" id="test5" name="test5" value="" data-fjs-validate="click" data-fjs-required="true"/>
                    <div class="error" data-fjs-error_for="test5"></div>
                </div>
                <div>
                    <input type="submit" value="Submit" data-fjs-localizable="Submit"/>
                </div>
            </form>
        </div>
        <div>
            <h1 data-fjs-localizable="Localization">Localization</h1>
            <select id="lang" onchange="$$.fjs.lang.set($(this).val())">
                <option value="en-us">English</option>
                <option value="ru-ru">Russian</option>
            </select>
            <a href="#" onclick="alert($$_('Test string'));return false;" data-fjs-localizable="Runtime example">Runtime example</a>
        </div>
        <div>
            <fieldset>
                <legend data-fjs-localizable="Just dragging">Just dragging</legend>
            <div class="ui-container">
                <div class="ui-element" data-fjs-localizable="Drag me" data-fjs-draggable="parent" data-fjs-draggable-cursor="pointer"></div>
            </div>
            </fieldset>
        </div>
        <div>
            <fieldset>
                <legend data-fjs-localizable="Dragging and dropping">Dragging and dropping</legend>
            <div class="ui-container">
                <div class="ui-element" data-fjs-localizable="Drag me" data-fjs-draggable="window" data-fjs-draggable-cursor="pointer" data-fjs-drop-to="Droppable1"></div>
            </div>
            <div data-fjs-localizable="Drop it here"></div>
            <div class="ui-container droppable" data-fjs-droppable="Droppable1" data-fjs-highlight-class="ui-state-highlight" data-fjs-ondrop="$what.attr('data-fjs-localizable','Cool!');$what.text($$_('Cool!'));">
                
            </div>
            </fieldset>
        </div>
        <hr/>
        
        <div>
            <h1>Facebook integration</h1>
            <div id="login_status">Estimating</div>
            <a href="#" id="login" data-fjs-fb-login="">Login with Facebook</a>
        </div>
        <div>
            <a href="#" 
               data-fjs-fb-feed-name="FairyJS on Github"
               data-fjs-fb-feed-link="http://github.com/zysoft/FairyJS"
               data-fjs-fb-feed-picture="http://a248.e.akamai.net/assets.github.com/images/modules/header/logov6.png"
               data-fjs-fb-feed-caption="Javascript fairy for the website"
               data-fjs-fb-feed-description="FairyJS is kind of framework helping you to serve rich features to your website visitors easily and with no hassle. By default it doesn't require you to even know JavaScript in order to make it working."
            >Publish a story</a>
        </div>
        <div>
            <a href="#" 
               data-fjs-fb-apprequest-message="Go see FairyJS demo!"
               data-fjs-fb-apprequest-filter="app_non_users"
               data-fjs-fb-apprequest-title="Tell your friends about FairyJS!"
            >Share the app!</a>
        </div>
    </body>
</html>
