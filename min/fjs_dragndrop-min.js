/* FairyJS zysoft.github.com/FairyJS | github.com/zysoft/FairyJS/blob/master/LICENSE */
$$.fjs.dragndrop={register:function(){if(!$$.ui){$$.fjs.warn('jQuery UI is required to run plugin "dragndrop"');return}$$.fjs.dragndrop.setDraggable();$$.fjs.dragndrop.setDroppable();$$.fn.extend({makeDraggable:function(){$$.fjs.dragndrop.setDraggable($$(this));return this},makeDroppable:function(){$$.fjs.dragndrop.setDroppable($$(this));return this}})},setDraggable:function(a){(a?a:$$("*[data-fjs-draggable]")).each(function(){var d={};var g=$$(this).attr("data-fjs-draggable");switch(g){case"window":case"parent":case"document":break;default:g=g.split(",")}d.containment=g;var e=$$(this).attr("data-fjs-draggable-cursor");if(e){d.cursor=e}var b=$$(this).attr("data-fjs-draggable-revert");var f={valid:"valid",invalid:"invalid","true":true};if(b&&f[b]){d.revert=f[b]}d.start=function(h,i){$$.fjs.fire("org.fjs.dragndrop.drag.start",$$(this),i)};d.stop=function(h,i){$$.fjs.fire("org.fjs.dragndrop.drag.stop",$$(this),i)};var c=$$(this).attr("data-fjs-draggable-clone");if(c){d=$$.extend(d,{opacity:0.5,helper:"clone"})}$$(this).draggable(d)});return this},setDroppable:function($object){($object?$object:$$("*[data-fjs-droppable]")).each(function(){var droppableArgs={};var acceptedDroppables=$$(this).attr("data-fjs-droppable").split(",");var onDropCode=$$(this).attr("data-fjs-ondrop");var activeClass=$$(this).attr("data-fjs-highlight-class");var selector='*[data-fjs-drop-to="'+acceptedDroppables.join(',*[data-fjs-drop-to="')+'"]';$$.fjs.log("Item set to accept: "+selector+". Matched items: "+$$(selector).length);droppableArgs.accept=selector;droppableArgs.drop=function($ev,$ui){$$.fjs.fire("org.fjs.dragndrop.drop",$ui.draggable,$$(this));$what=$ui.draggable;$where=$$(this);eval(onDropCode)};if(activeClass){droppableArgs.activeClass=activeClass}$$(this).droppable(droppableArgs)});return this},disableDragFor:function(a){a.draggable("option","disabled",true);return this},enableDragFor:function(a){a.draggable("option","disabled",false);return this},disableDropFor:function(a){a.droppable("option","disabled",true);return this},enableDropFor:function(a){a.droppable("option","disabled",false);return this}};
